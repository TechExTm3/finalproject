<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Docker File Manager</title>
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Inconsolata">
    <style>
        body, html {
            height: 100%;
            font-family: "Inconsolata", sans-serif;
        }

        .bgimg {
            background-position: center;
            background-size: cover;
            background-image: url("https://www.w3schools.com/w3images/coffeehouse.jpg");
            min-height: 50%;
            filter: grayscale(90%);
        }

        textarea {
            width: 100%;
            height: 200px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            border: 1px solid #ccc;
            border-radius: 5px;
            resize: none;
            background-color: #f9f9f9;
        }

        .w3-container {
            padding: 20px;
        }

        .w3-button {
            margin-bottom: 10px;
        }
    </style>
</head>
<body>

<!-- Navigation bar -->
<div class="w3-top">
  <div class="w3-row w3-padding w3-black">
    <div class="w3-col s3">
      <a href="#" class="w3-button w3-block w3-black">HOME</a>
    </div>
    <div class="w3-col s3">
      <a href="#about" class="w3-button w3-block w3-black">ABOUT</a>
    </div>
    <div class="w3-col s3">
      <a href="#fileManager" class="w3-button w3-block w3-black">DOCKER TEMPLATES</a>
    </div>
  </div>
</div>

<!-- Header -->
<header class="bgimg w3-display-container w3-grayscale-min" id="home">
  <div class="w3-display-middle w3-center">
    <span class="w3-text-white" style="font-size:40px"><br>Docker Templates</span>
  </div>
</header>

<!-- Main content -->
<div class="w3-sand w3-grayscale w3-large">
  
  <!-- About section -->
  <div class="w3-container" id="about">
    <div class="w3-content" style="max-width:700px">
      <h5 class="w3-center w3-padding-64"><span class="w3-tag w3-wide">ABOUT THIS TOOL</span></h5>
      <p>This tool allows you to manage Docker-related JSON and YAML files by viewing and downloading them directly. It simplifies the process of handling configuration files, making Docker management easier.</p>
    </div>
  </div>

  <!-- File manager section -->
  <div class="w3-container" id="fileManager">
    <div class="w3-content" style="max-width:500px">
      <h5 class="w3-center w3-padding-64"><span class="w3-tag w3-wide">DOCKER TEMPLATES</span></h5>
      
      <!-- Buttons to load different files -->
      <button class="w3-button w3-center w3-black" onclick="loadFile('/data/docker.json')">Load JSON</button>
      <button class="w3-button w3-center w3-black" onclick="loadFile('/data/docker.yaml')">Load YAML</button>
      <button class="w3-button w3-center w3-black" onclick="downloadFile()">Download</button>
      
      <!-- Display file contents in textarea -->
      <textarea id="fileContents" readonly placeholder="File content will appear here..."></textarea>
      
      <!-- Clear button -->
      <button class="w3-button w3-black" onclick="clearText()">Clear</button>
    </div>
  </div>

  

<!-- Footer -->
<footer class="w3-center w3-light-grey w3-padding-48 w3-large">
  <p>Designed by Thumay </p>
</footer>

<script>
    let currentFileName = ''; // To store the current file's name

    // Function to load the JSON or YAML file from the server
    function loadFile(filePath) {
        fetch(filePath)
        .then(response => {
            if (!response.ok) {
                throw new Error('Network response was not ok');
            }
            return response.text(); // Use text() for both JSON and YAML files
        })
        .then(data => {
            document.getElementById('fileContents').textContent = data;
            currentFileName = filePath.split('/').pop(); // Store the file name for download
        })
        .catch(error => {
            document.getElementById('fileContents').textContent = 'Error loading file: ' + error;
        });
    }

    // Function to download the current content from the text area
    function downloadFile() {
        const content = document.getElementById('fileContents').value;
        
        if (!content) {
            alert('No content to download!');
            return;
        }

        // Create a blob object from the text content
        const blob = new Blob([content], { type: 'text/plain' });
        const url = URL.createObjectURL(blob);

        // Create a temporary <a> element to trigger the download
        const a = document.createElement('a');
        a.href = url;
        a.download = currentFileName || 'file.txt'; // Will download with the correct file extension (.json or .yaml)
        document.body.appendChild(a);
        a.click(); // Trigger the download
        document.body.removeChild(a); // Remove the <a> element after download
    }

    // Function to clear the text area
    function clearText() {
        document.getElementById('fileContents').textContent = '';
        currentFileName = ''; // Clear the file name as well
    }
</script>

</body>
</html>
